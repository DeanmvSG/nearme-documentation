%header.dialog__header
  %h2#dialog__title= t('manage.photos.crop_and_rotate')

= form_tag form_url, :method => :put, :id => 'crop-form', 'data-id' => object.model.id do
  .dialog__body
    -if @user.try(:errors).try(:any?)
      .error-block= t('manage.photos.edit.error')
    %p
      %button.btn.btn-primary.btn-xs{:type => "button", :data => {:"rotate-photo" => true}}= t('manage.photos.edit.rotate')

    .resize-container
      = image_tag object_url, 'data-image' => true, data: { rotate: object.transformation_rotate, crop: object.transformation_crop, original_dimensions: object.original_dimensions, :"aspect-ratio" => object_aspect_ratio(object) }

  .dialog__actions
    = submit_tag t('manage.photos.edit.process'), class: "button-a"


  :javascript
    $(function() { new PhotoManipulator('#crop-form') });
