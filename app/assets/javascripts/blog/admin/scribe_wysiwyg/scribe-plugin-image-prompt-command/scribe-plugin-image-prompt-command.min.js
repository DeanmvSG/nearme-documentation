define("scribe-plugin-image-prompt-command",[],function(){return function(){return function(e){var t=new e.api.Command("insertImage");t.nodeName="IMG";t.execute=function(){var t=new e.api.Selection;var n=t.range;var r=t.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this));var i=r?r.src:"http://";var s=window.prompt("Enter a image link.",i);if(r){n.selectNode(r);t.selection.removeAllRanges(n);t.selection.addRange(n)}if(s){if(!/^mailto\:/.test(s)&&/@/.test(s)){var o=window.confirm("The URL you entered appears to be an email address. "+"Do you want to add the required “mailto:” prefix?");if(o){s="mailto:"+s}}else if(!/^https?\:\/\//.test(s)){var u=window.confirm("The URL you entered appears to be a link. "+"Do you want to add the required “http://” prefix?");if(u){s="http://"+s}}e.api.SimpleCommand.prototype.execute.call(this,s)}};t.queryState=function(){var t=new e.api.Selection;return!!t.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))};e.commands.imagePrompt=t}}})