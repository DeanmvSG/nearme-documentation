%section#new-item
  .container-fluid
    %h2.section-heading List New Item

    = f.input :item_title, :placeholder => "Attractive title name here", hint: "Descriptive titles are best. Try to describe your item th eway a buyer would."
    = f.input :item_description, as: :text, :placeholder => "This item is great and here is a story about it...", hint: "Try to answer the questions buyers will have about your product. Tell the item's story and explain why it's special."
    = f.input :category, :placeholder => "Enter a category"
    .row-fluid
      .span3
        %label Photos
      .span9
        .row-fluid
          =f.fields_for :photos do |p|
            - if p.object.new_record?
              .span4
                = p.label :attachment, class: "photo-box active" do
                  .photo-select
                    =image_tag("themes/product_theme/icon-cross.png")
                    Add Photo
                  = p.file_field :attachment, class: 'item_image'
            - else
              .span4
                =image_tag(p.object.image.url(:medium))

    = f.input :price, :placeholder => "$0.00", value: '123123123'
    = f.input :quantity, as: :integer, :placeholder => "1"

%section#shipping-info
  .container-fluid
    %h2.section-heading Shipping Info
    =f.fields_for :shipping_methods do |s|
      %fieldset
        .row-fluid.shipping_method_block
          .span3
            %label{:for => ""} Shipping Profile
          .span9.input-container
            .remove_shipping_profile
              -if s.object.new_record?
                = s.check_box :hidden, class: "hidden shipping_hidden"
                = s.label :hidden, "Delete this profile"
              -else
                = s.check_box :removed, class: "hidden remove_shipping red"
                = s.label :removed, "Delete this profile"
            .shipping-form
              .row-fluid
                = s.input :name, placeholder: "Enter a name for your profile", label: "New Profile Name"
              .row-fluid
                .span5
                  = s.input :processing_time, placeholder: "Ready to ship in..."
                .span1
                .span6
                  =s.fields_for :calculator do |fc|
                    =fc.input :preferred_amount, label: 'Cost', input_html: { class: 'form-control'}

              .row-fluid
                =s.fields_for :zones do |z|
                  =z.hidden_field :name
                  .row-fluid
                    Ships To
                  .row-fluid
                    .span5
                      = z.input :kind, as: :select, include_blank: false, label: false,  collection: [["State based", "state_based"], ["Country based", "country"]], input_html: {class: 'zone_kind_select'}
                    .span1
                    .span5
                      = z.text_field :country_ids, value: z.object.country_ids.join(","),  class: 'country_based_select select2 ', data: {api: 'countries'}
                      = z.text_field :state_ids, value: z.object.state_ids.join(","), class: 'state_based_select select2 ', data: {api: 'states'}
    %a.shipping-profile-top.add_shipping_profile
      =image_tag("themes/product_theme/icon-cross.png")
      %p Create New Shipping Profile
.submit-bar
  = f.submit "Save for Later", class: "btn medium green", name: "product_form[draft]"
  = f.submit "Continue and Preview Listing", class: "btn medium blue"

- content_for :domready do
  new TaxonAutocomplete($("#edit_product_form, #new_product_form", "#{@product_form.spree_api_key}"));
  new Dashboard.AddressController($("#edit_product_form, #new_product_form"));
  new BoardingForm($("#edit_product_form, #new_product_form"));