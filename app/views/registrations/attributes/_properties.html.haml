- if f.object.respond_to?(:default_profile)
  = f.simple_fields_for :default_profile do |default_profile_form|
    - if default_profile_form.object.respond_to?(:model)
      - (default_profile_form.object.model.instance_profile_type.try(:custom_attributes) || []).each do |ca|
        - next unless only_inputs.empty? || only_inputs.include?(ca.name.to_sym)
        - if ca.uploadable?
          = default_profile_form.simple_fields_for :custom_images, default_profile_form.object.model.custom_images.where(custom_attribute_id: ca.id).first_or_initialize do |custom_images_form|
            = render 'custom_images/attribute', f: custom_images_form, ca: ca
        - else
          = default_profile_form.simple_fields_for :properties do |properties_form|
            = draw_attribute_for_form(ca, properties_form)
    - else
      - (default_profile_form.object.instance_profile_type.try(:custom_attributes) || []).each do |ca|
        - next unless only_inputs.empty? || only_inputs.include?(ca.name.to_sym)
        - if ca.uploadable?
          = default_profile_form.simple_fields_for :custom_images, default_profile_form.object.custom_images.where(custom_attribute_id: ca.id).first_or_initialize  do |custom_images_form|
            = render 'custom_images/attribute', f: custom_images_form, ca: ca
        - else
          = default_profile_form.simple_fields_for :properties do |properties_form|
            = draw_attribute_for_form(ca, properties_form)
