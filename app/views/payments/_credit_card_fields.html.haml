.credit-card-fields
  - if f.object.errors[:cc].present?
    .flash.error
      %ul
        - f.object.errors[:cc].each do |e|
          %li= e

  .padding-bottom.submit-secure-payment
    .row-fluid
      .span5.text
        .ico-lock= t 'payments.heading'
      .span7.credit-card-images
        = image_tag 'credit-cards.png', alt: t('payments.cc_image_alt', default: 'Credit cards')
      .clearfix

  .padding-bottom.credit-card
    .row-fluid
      .span6
        = f.label :card_holder_first_name, t('payments.cc_fields.first_name'), class: 'control-label'
        = f.input_field :card_holder_first_name, class: 'sessioncamexclude', required: true, autocomplete: :off
      .span6
        = f.label :card_holder_last_name, t('payments.cc_fields.last_name'), class: 'control-label'
        = f.input_field :card_holder_last_name, class: 'sessioncamexclude', required: true, autocomplete: :off
    .row-fluid
      .span6.card-info{class: "#{"error" if f.object.errors.include?(:number).present?}"}
        = f.label :card_number, t('payments.cc_fields.card_number'), class: 'control-label'
        .controls.card-number.input-icon-holder-right
          = f.input_field :card_number, required: true, placeholder: 'aaaa aaaa aaaa aaaa', class: 'sessioncamexclude', pattern: "[0-9]*", autocomplete: "off", 'data-card-number' => true
          %span.ico-credit-card
        - if f.object.errors[:number].present?
          %p.error-block
            = f.object.errors[:number].first

      .span3.card-info.expiry.column.left{class: "#{"error" if f.object.errors.include?(:exp_month).present? or f.object.errors.include?(:exp_year).present?}"}
        = f.label :card_expires, t('payments.cc_fields.expiration_date'), class: 'control-label'
        .controls.card-expires
          = f.input_field :card_expires, input_html: {size: 6}, placeholder: 'MM/YYYY', required: true, class: 'sessioncamexclude', pattern: "[0-9]*", autocomplete: "off", 'data-card-expires' => true
        - if f.object.errors[:exp_month].present?
          %p.error-block
            = f.object.errors[:exp_month].first
        - if f.object.errors[:exp_year].present?
          %p.error-block
            = f.object.errors[:exp_year].first

      .span3.card-info.security.column.right{class: "#{"error" if f.object.errors.include?(:cvc).present?}"}
        = f.label :card_code, t('payments.cc_fields.security_code'), class: 'control-label'
        .controls.card-code
          = f.input_field :card_code, input_html: {size: 3}, placeholder: 'CCV', required: true, class: 'sessioncamexclude', pattern: "[0-9]*", autocomplete: "off", 'data-card-code' => true
        - if f.object.errors[:cvc].present?
          %p.error-block
            = f.object.errors[:cvc].first

  .clearfix

- content_for :script do
  = javascript_include_tag "https://js.stripe.com/v1/"
  = javascript_include_tag "https://js.braintreegateway.com/v2/braintree.js"
  :javascript
    $(function() {
      $('input[data-card-number]').eq(0).payment('formatCardNumber');
      $('input[data-card-expires]').eq(0).payment('formatCardExpiry');
      $('input[data-card-code]').eq(0).payment('formatCardCVC');
    })

