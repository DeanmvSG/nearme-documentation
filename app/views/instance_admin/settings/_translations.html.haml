%fieldset
  %legend Translations
  %table.translations{width: '100%'}
    %tbody
      - Translation.defaults_for(:en).order('key ASC').each_with_index do |translation, index|
        %tr
          %td{width: '60%'}
            %label{for: "instance_translations_#{index}"}= translation.key
          %td
            %input{type: 'hidden', name: "instance[translations_attributes][#{index}][key]", value: translation.key}
            %input{type: 'hidden', name: "instance[translations_attributes][#{index}][instance_id]", value: instance.id}
            %input{type: 'hidden', name: "instance[translations_attributes][#{index}][locale]", value: translation.locale}
            - if instance_translation = translations.detect{|t| t.key == translation.key}
              %input.input-xxlarge{id: "instance_translations_#{index}", type: 'text', name: "instance[translations_attributes][#{index}][value]", value: instance_translation.value, placeholder: translation.value}
              %input{type: 'hidden', name: "instance[translations_attributes][#{index}][_destroy]", value: 'false'}
              %input{type: 'hidden', name: "instance[translations_attributes][#{index}][id]", value: instance_translation.id}
            - else
              %input.input-xxlarge{id: "instance_translations_#{index}", type: 'text', name: "instance[translations_attributes][#{index}][value]", value: '', placeholder: translation.value}

  %p
    = f.button :submit, 'Save', class: 'btn btn-success'
  %br
