.content-container
  %h4= t 'instance_admin.locales.labels.keys', language: @locale.name
  .row
    .table-container
      .filters
        .filter.search
          = form_tag edit_keys_instance_admin_settings_locale_path, method: :get do
            %input{placeholder: t('instance_admin.manage.users.index.search_by_keyword'), type: 'text', name: 'q', value: params[:q]}
            =fa_icon "search"
      %table#translations-table
        = simple_nested_form_for @instance, url: instance_admin_settings_translations_path, html: { multipart: true, 'data-edit' => 'keys' } do |f|
          %thead
            %tr
              %th
          %tbody
            - @default_and_custom_translations.each_with_index do |translation, index|
              - instance_translation = @translations.detect { |t| t.key == translation.key }
              %tr
                %td{'data-search' => "#{instance_translation ? (instance_translation.value.present? ? translation.value : instance_translation.value) : translation.value} #{translation.key}" }
                  .row
                    .input-container.col-xs-12
                      %label{for: "instance_translations_#{index}"}= translation.key
                      %input{type: 'hidden', name: "instance[translations_attributes][#{index}][key]", value: translation.key}
                      %input{type: 'hidden', name: "instance[translations_attributes][#{index}][instance_id]", value: @instance.id}
                      %input{type: 'hidden', name: "instance[translations_attributes][#{index}][locale]", value: @locale.code}
                      - if instance_translation
                        %input.form-control{id: "instance_translations_#{index}", type: 'text', name: "instance[translations_attributes][#{index}][value]", value: instance_translation.value, placeholder: translation.value}
                        %input{type: 'hidden', name: "instance[translations_attributes][#{index}][_destroy]", value: 'false'}
                        %input{type: 'hidden', name: "instance[translations_attributes][#{index}][id]", value: instance_translation.id}
                      - else
                        %input.form-control{id: "instance_translations_#{index}", type: 'text', name: "instance[translations_attributes][#{index}][value]", value: '', placeholder: translation.value}

            = content_for :header_buttons do
              = f.button :submit, t('instance_admin.locales.buttons.save'), class: 'btn btn-blue pull-right', data: { 'submit-form' => 1, 'form-selector' => 'form' }

  = will_paginate @default_and_custom_translations
