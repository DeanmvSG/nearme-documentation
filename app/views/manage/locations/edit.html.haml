
= render :layout => 'manage/layout' do
  .box
    %h2
      Manage
      %strong= @location.name

    = render 'manage/locations/navigation', :active => :space

    = simple_form_for([:manage, @location], :html => { :class => 'form-horizontal edit_location' }) do |f|
      = render 'shared/context_flash'

      = f.input :name, :label => 'Space name', :placeholder => 'Name your space!'

      .control-group
        = f.label :address, 'Space location', :class => "control-label"
        .controls
          = f.text_field :address, :placeholder => "Type an address...", :'data-behavior' => 'address-autocomplete', :autocomplete => 'off'

          .map{:style => "display: none", :'data-marker' => image_path("components/map-pin.png")}
            .map-container{:style => "height: 240px; width: 373px"}

          = f.hidden_field :local_geocoding
          = f.hidden_field :latitude
          = f.hidden_field :longitude
          = f.hidden_field :formatted_address

      = f.input :description, :label => 'Space description', :placeholder => 'Describe the overall look, feel, and ambience of your space. Be exciting!'
      = f.input :email, :label => 'Booking email', :placeholder => 'yourname@example.com'
      = f.input :phone, :label => 'Booking phone #', :placeholder => '1800 BOOKSPACE'
      = f.input :currency, :as => :currency, :label => "Booking currency", :default => 'USD'
      = f.input :special_notes, :as => :string, :label => 'Special terms or notes', :placeholder => 'Any special terms or notes to add?', :hint => "Got a dog? Require an NDA? Write any special conditions for booking."

      = f.input :organization_ids, :collection => Organization.order('name').all, :as => :check_boxes, :label => "Professional Associations", :hint => "Please check any professional associations with which you are affiliated. You can then optionally restrict your listings to users who have identified themselves as a member of these associations."
      = f.input :amenity_ids, :label => "Amenities Provided", :collection => Amenity.order('name').all, :as => :check_boxes, :hint => "Please check any services you provide."
      = f.input :require_organization_membership, :input_html => { :class => "check_boxes" }, :label_html => { :class => "check_box" }, :label => "Require Association Membership", :hint => "This will only show your listings to members of the professional associations you selected above"

      .control-group.indent
        = render 'availability_rules/form', :f => f, :allow_clear => "Use Location's availability"

      .actions
        = f.button :submit

:javascript
  $(function() {
    // Initialize the location form
    new LocationFormController($('form.new_location, form.edit_location'))
  });

