<% partial = @commentable.is_a?(Transactable) ? 'comments/comment' : 'comments/activity_feed_comment' %>
$('[data-comments-for=<%= @commentable.id %>]').append('<%= escape_javascript( render(partial: partial, collection: @comments, as: :comment) ) %>');

<% if @comments.total_pages == @comments.current_page %>
  $('[data-load-more-comments]').replaceWith("")
<% else %>
  $('[data-load-more-comments]').replaceWith("<%= escape_javascript link_to t(:load_more_comments), url_for([@commentable, 'comments']), data: { remote: true, "load-more-comments": true, params: { page: params[:page].to_i + 1 }} %>")
<% end %>
$('.content-container').trigger('next-page')
