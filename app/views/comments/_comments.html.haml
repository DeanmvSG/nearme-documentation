- css_class = local_assigns[:is_active].present? ? "is-active" : ""

%div.comment{:class => css_class}
  - if current_user
    .publish-a
      = simple_form_for comment, url: url_to_comment(comment.commentable, comment), remote: true  do |f|
        %figure
          = image_tag current_user.avatar.url(:thumb)

        = f.input :body, label: false, input_html: { data: {'new-comment-for': comment.commentable.id }, cols: 40, rows: 3 }

        %p.action
          = f.button :submit, class: 'button-a tiny'

  - comments =  comment.commentable.comments.order("created_at DESC").paginate(page: 1, per_page: 10)
  .comments{ "data-comments-for": comment.commentable.id, "data-current-user-id": current_user.id }= render comments

  .aligncenter
    - if comments.total_pages > comments.current_page
      = link_to t(:load_more_comments), url_for([comment.commentable, "comments"]), data: { remote: true, "load-more-comments": true, params: { page: 2 }}
