(function(){
    'use strict';
    var commentField = $('[data-new-comment-for="<%= @comment.commentable.id  %>"]');
    var comments = $('[data-comments-for="<%= @comment.commentable.id  %>"]');

    <% if @comment.errors.present? %>
        commentField.parents(".control-group").addClass("error")
    <% else %>
        commentField.val('').parents(".control-group").removeClass("error")
        comments.prepend('<%= escape_javascript( render @comment ) %>');
    <% end %>

}());
