- title t('reservations.rfq_long')
- @ticket = @ticket.decorate
- @date_presenter = DatePresenter.new(@ticket.reservation_dates)
- if @ticket.reservation_details && @ticket.reservation_details['start_minute'].present? && @ticket.reservation_details['end_minute'].present?
  - @hourly_presenter = HourlyPresenter.new(@ticket.reservation_dates.first, @ticket.reservation_details['start_minute'].to_i, @ticket.reservation_details['end_minute'].to_i)

.dash-page
  .dash-head.clearfix
    - if @ticket.target.action_free_booking?
      %p="#{t('reservations.rfq_short')} ##{@ticket.id}: "
    - else
      %p="#{t('reservations.offer')} ##{@ticket.id}: "
    - if @ticket.reservation_details && @ticket.reservation_details['quantity'].present?
      %p
        Quantity: #{@ticket.reservation_details['quantity']}
    %p.pull-right
      Status:
      %span{class: "#{@ticket.state}"}= @ticket.state.titleize

  - span_class2 = 'span10'
  - span_class3 = 'span2'
  - if @ticket.reservation_dates.any?
    - span_class1 = 'span3'
    - span_class2 = 'span3'
    - span_class3 = 'span1 offset1'
  .dash-body.thread

    = render partial: 'dashboard/company/support/tickets/ticket_message', collection: @ticket.messages, spacer_template: 'dashboard/company/support/tickets/spacer'

    - if @ticket.open?
      = render partial: 'dashboard/company/support/tickets/form', locals: { ticket: @ticket, message: @message, with_close: false, form_url: support_ticket_ticket_messages_path(@ticket) }

= content_for :script do
  :javascript
    jQuery.timeago.settings.strings.minutes = "%d min"
    jQuery.timeago.settings.strings.minute = jQuery.timeago.settings.strings.minutes
    jQuery.timeago.settings.strings.seconds = jQuery.timeago.settings.strings.minutes;
    jQuery.timeago.settings.strings.hours = "about %d h"
    jQuery.timeago.settings.strings.hours = jQuery.timeago.settings.strings.hours
    $('abbr.timeago').timeago();
    new Support.TicketMessageController($('.message-form').eq(0))
