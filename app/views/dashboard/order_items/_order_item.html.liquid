<article class="order-item-entry">
  <header>
    <h4>Tracked Items &amp; Expenses entry</h4>

    <div class="options">
      {% if item.payment_state == 'unpaid' %}
        <a href="{{ 'edit_dashboard_order_order_item_path' | generate_url: order_id: order.id, id: item.id }}" class="btn btn-primary btn-xs">Edit</a>
      {% else %}
        <a href="{{ 'dashboard_order_order_item_path' | generate_url: order_id: order.id, id: item.id }}" class="btn btn-primary btn-xs">View</a>
      {% endif %}
    </div>

    <div class="meta">
      Submitted on <time datetime="{{ item.created_at }}">{{ item.created_at | strftime: "%m/%d/%Y at %I:%M%p" }}</time>
    </div>
  </header>

  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Status</th>
          <th>Date</th>
          <th>Service Type / Item</th>
          <th>Hours / Items</th>
          <th>Rate / Cost</th>
          <th>Totals</th>
        </tr>
      </thead>
      <tbody>
        {% for line_item in item.line_items %}
          <tr>
            <td>
              {{ 'dashboard.payments.states.' | append: item.payment_state | t }}</td>
            <td>{{ line_item.created_at | to_date | l: 'short' }}</td>
            <td>{{ line_item.name }}</td>
            <td>{{ line_item.quantity }}</td>
            <td>{{ line_item.formatted_unit_price }}</td>
            <td>{{ line_item.formatted_total_price }}</td>
          </tr>
        {% endfor %}

        <tr>
          <td colspan="4" class="order-item-actions">
          </td>
          <th scope="row" class="subtotal">Subtotal</th>
          <td>{{ item.formatted_total_amount }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</article>
