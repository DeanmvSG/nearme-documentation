.box
  - if @payments.empty?
    %p.no_data
      = t('dashboard.analytics.no_payments_received_last_7_days')
  - else
    .chart
      .total.right
        - @chart.totals_by_currency.each do |currency, sum|
          .total-number.left
            = "#{currency_content_tag(currency, sum, :span, { :rel => false })}".html_safe
        %span{class: 'total-text'} 7 day total
      %canvas#chart

    %table.table.table-simple
      %thead
        %tr
          %th Amount
          %th Location
          %th Date
      %tbody
        - @payments.each do |payment|
          %tr
            %td= currency_content_tag(payment.currency, payment.total_amount, :span, { :rel => false }).html_safe
            %td= payment.payable.try(:listing).try(:location).try(:name).presence || payment.payable.try(:number).presence || '<Deleted>'
            %td= I18n.l(payment.created_at, format: :short)

        - @all_time_totals.each do |total|
          - total = Money.new(total[:sum], total[:currency])
          %tr.total-row
            %td= currency_content_tag(total.currency, total.amount, :span, { :rel => false }).html_safe
            %td all time total
            %td

      = will_paginate_styled @payments
