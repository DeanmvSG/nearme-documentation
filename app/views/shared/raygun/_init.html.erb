<% if Rails.application.config.raygun_js_reporting %>
<script type="text/javascript">
  rg4js('apiKey', '<%= Rails.application.config.raygun_js_api_key %>');
  rg4js('enableCrashReporting', true);
  rg4js('enablePulse', true);
  rg4js('setVersion', '<%= Rails.application.config.app_version %>');
  rg4js('options', { ignoreAjaxAbort: true, ignore3rdPartyErrors: true });
  <% if ENV['ASSET_HOST'].present? %>
  rg4js('whitelistCrossOriginDomains', ['<%= URI(ENV['ASSET_HOST']).host %>']);
  <% end %>

  <% if current_user %>
  rg4js('setUser', {
    identifier: <%= current_user.id %>,
    isAnonymous: false,
    email: '<%= current_user.email %>',
    firstName: '<%= current_user.first_name %>',
    fullName: '<%= current_user.name %>'
  });
  <% end %>
</script>
<% end %>
