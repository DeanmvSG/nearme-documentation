.wrap-a.reduce-top
  .contain

    %h1.h2
      = t :my_projects

    / white box
    .box-a

      - if @projects.empty?
        .empty-projects
          %p.cta
            = t :empty_cta
          %p
            = link_to t(:add_project), new_dashboard_project_type_project_path(@transactable_type), class: 'button-a'

      - else
        .project-actions
          = link_to t(:add_project), new_dashboard_project_type_project_path(@transactable_type), class: 'button-a small'

        %table.projects-listing
          %thead
            %tr
              %th.col-picture
                = t :picture
              %th.col-name
                = t :name
              %th.col-summary
                = t :summary
              %th.col-role
                = t :role
              %th.col-status
                = t :status
              %td.col-actions
          %tbody

            - @projects.each do |project|
              %tr
                %td.col-picture
                  = link_to project_path(project) do
                    = image_tag project.cover_photo.image.url(:project_thumbnail)
                %td.col-name
                  = link_to project.name, project_path(project)
                %td.col-summary
                  .project-summary-wrapper
                    = project.summary
                %td.col-role
                  = t(project.creator_id == current_user.id ? :owner : :collaborator)
                %td.col-status
                  - if project.draft?
                    %span.status-draft
                      = t('draft')
                  - elsif project.try(:enabled?)
                    %span.status-published
                      = t('published')

                %td.col-actions
                  = link_to t(:edit), edit_dashboard_project_type_project_path(@transactable_type, project), class: 'action-edit'
                  - if project.creator_id == current_user.id
                    = link_to t(:remove), dashboard_project_type_project_path(@transactable_type, project), method: :delete, class: 'action-remove', data: { confirm: 'Are you sure?' }

