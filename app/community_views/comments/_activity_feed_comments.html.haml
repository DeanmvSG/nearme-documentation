- css_class = local_assigns[:is_active].present? ? "is-active" : ""

%div.comment{:class => css_class}
  - if current_user
    = simple_form_for [comment.commentable, comment], remote: true  do |f|

      = f.input :body, label: false, input_html: { maxlength: 5000, data: {'new-comment-for': comment.commentable.id }, cols: 40, rows: 3 }

      %p.action
        = f.submit I18n.t('activity_feed.user_status_submit'), class: 'button-a tiny'

- comments =  comment.commentable.comments.order("created_at DESC").includes(:creator).paginate(page: 1, per_page: 10)
.comments{ "data-comments-for": comment.commentable.id}<
  - comments.each do |sub_comment|
    - cache [user_signed_in?, current_instance.context_cache_key, sub_comment] do
      = render 'comments/activity_feed_comment', comment: sub_comment

.aligncenter
  - if comments.total_pages > comments.current_page
    = link_to t(:load_more_comments), url_for([comment.commentable, "comments"]), data: { remote: true, "load-more-comments": true, params: { page: 2 }}
