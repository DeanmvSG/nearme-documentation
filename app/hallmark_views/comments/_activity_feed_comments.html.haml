- css_class = local_assigns[:is_active].present? ? "is-active" : ""

%div.comment{:class => css_class}
  - if current_user
    = render "comments/form", comment: comment

- comments =  comment.commentable.comments.order("created_at DESC").includes(:creator).paginate(page: 1, per_page: 10)
.comments{ "data-comments-for": comment.commentable.id}<
  - comments.each do |sub_comment|
    - cache [user_signed_in?, current_instance.context_cache_key, sub_comment] do
      = render 'comments/activity_feed_comment', comment: sub_comment

.aligncenter
  - if comments.total_pages > comments.current_page
    = link_to t(:load_more_comments), url_for([comment.commentable, "comments"]), data: { remote: true, "load-more-comments": true, params: { page: 2 }}
